# -*- coding: utf-8 -*-
"""
MM 분석 설정 파일
market_making_guide_2026.md 기반
"""

# ============================================================
# 근월물/차근월물 전환 기준
# ============================================================
# "해당 종목의 최종거래일 이전 4영업일부터 차근월종목을 최근월종목으로 간주"
ROLLOVER_DAYS_BEFORE_EXPIRY = 4  # 최종거래일 이전 N영업일부터 차근월물 사용

# ============================================================
# 의무시간
# ============================================================
DUTY_START_TIME = "09:05:00"  # 의무시간 시작
DUTY_END_TIME = "15:20:00"    # 의무시간 종료
DUTY_START_SEC = 9 * 3600 + 5 * 60   # 32700
DUTY_END_SEC = 15 * 3600 + 20 * 60   # 55200
TOTAL_DUTY_SECONDS = DUTY_END_SEC - DUTY_START_SEC  # 22500초 = 375분

# ============================================================
# 의무이행률 기준 (2026년)
# ============================================================
DUTY_RATE_THRESHOLD = {
    "주식옵션": {"일중": 0.85, "기간": 0.70},  # 85%, 70%
    "주식선물": {"일중": 0.85, "기간": 0.80},
    "ETF선물": {"일중": 0.85, "기간": 0.80},
}

# ============================================================
# MM 페어링 설정
# ============================================================
PAIRING_WINDOW_MS = 100  # Ask/Bid 페어링 윈도우 (밀리초)

# ============================================================
# DS투자증권 담당 종목 및 의무수량
# ============================================================
DS_STOCKS = {
    "KT": {
        "code": "KRDRVOPS14",
        "partner": "키움증권",
        "Q": {"ITM1": 9, "ATM": 13, "OTM1": 16, "OTM2": 30, "OTM3": 33, "OTM4": 54}
    },
    "LG전자": {
        "code": "KRDRVOPS24",
        "partner": "키움증권",
        "Q": {"ITM1": 5, "ATM": 6, "OTM1": 6, "OTM2": 9, "OTM3": 7, "OTM4": 11}
    },
    "현대제철": {
        "code": "KRDRVOPS32",
        "partner": "키움증권",
        "Q": {"ITM1": 7, "ATM": 9, "OTM1": 12, "OTM2": 16, "OTM3": 22, "OTM4": 33}
    },
    "LG디스플레": {
        "code": "KRDRVOPS45",
        "partner": "교보증권",
        "Q": {"ITM1": 20, "ATM": 27, "OTM1": 37, "OTM2": 49, "OTM3": 40, "OTM4": 57}
    },
    "삼성화재": {
        "code": "KRDRVOPSCT",
        "partner": "하나증권",
        "Q": {"ITM1": 3, "ATM": 3, "OTM1": 3, "OTM2": 3, "OTM3": 3, "OTM4": 3}
    },
    "카카오뱅크": {
        "code": "KRDRVOPSF6",
        "partner": "SK증권",
        "Q": {"ITM1": 20, "ATM": 23, "OTM1": 29, "OTM2": 41, "OTM3": 57, "OTM4": 94}
    },
}

# ============================================================
# 의무종목 범위
# ============================================================
# 주식옵션: OTM4 ~ ITM1 (총 6개 레벨)
OPTION_LEVELS = ["ITM1", "ATM", "OTM1", "OTM2", "OTM3", "OTM4"]
